; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter, extra scripting
;   Upload options: custom port, speed and extra flags
;   Library options: dependencies, extra library storages
;
; Please visit documentation for the other options and examples
; http://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = mkstft_28
src_dir      = ./
boards_dir   = buildroot/boards
[common]
default_src_filter = +<src/*> -<Drivers/> -<Middlewares/>

[env:mkstft_28]
platform = ststm32
board = eval_f107vc
framework = stm32cube
src_filter == ${common.default_src_filter} +<Middlewares/Third_Party/FatFs/src>
build_flags = -DF1
        -ffunction-sections
        -fdata-sections
        -funroll-loops
        -ISrc
        -IMiddlewares/Third_Party/FatFs/src
        -IInc
      ;  -IDrivers/
        -Og
       ; -mcpu=cortex-m3
        -D STM32F107xC
        -DSTM32F10X_CL
       ; -D MKS_TFT
       ; -D BOOTLOADER
      ;  -Wl,-TSTM32F107VC_FLASH.ld -lc -lm -lnosys
        -DUSE_HAL_DRIVER
        -DUSE_STM3210C_EVAL
        ;-DDEBUG
        


extra_scripts =
    ;pre:buildroot/scripts/pre_stm32f10x_0x7000_iap.py
    ;pre:buildroot/scripts/pre_install_variant.py
    ;pre:buildroot/scripts/pre_rename_outputfile.py
    ;post:buildroot/scripts/postBuild.py
debug_tool = stlink
upload_protocol = stlink
;debug_init_break = tbreak main